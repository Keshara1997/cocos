{"version":3,"sources":["file:///C:/Users/User/Documents/CocosGame/bikibili/login/assets/Script/loginScearnMgr.ts"],"names":["_decorator","Component","director","EditBox","Node","ccclass","property","loginScearnMgr","start","globalThis","eventTarget","on","onLoginSuccess","update","deltaTime","onClickLogin","str","my_EditBox","getComponent","string","console","log","_loginScearnMgr","_sendMessage","userId","data","success","user","_userInfo","userName","userHeadUrl","userRoomCards","loadScene","error","message"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,Q,OAAAA,Q;AAAUC,MAAAA,O,OAAAA,O;AAASC,MAAAA,I,OAAAA,I;;;;;;;;;OAE7C;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;gCAGjBO,c,WADZF,OAAO,CAAC,gBAAD,C,UAGHC,QAAQ,CAACF,IAAD,C,2BAHb,MACaG,cADb,SACoCN,SADpC,CAC8C;AAAA;AAAA;;AAAA;AAAA;;AAK1CO,QAAAA,KAAK,GAAG;AAEJC,UAAAA,UAAU,CAACC,WAAX,CAAuBC,EAAvB,CAA0B,eAA1B,EAA2C,KAAKC,cAAhD,EAAgE,IAAhE;AAEH;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AAGMC,QAAAA,YAAY,GAAG;AAElB,cAAIC,GAAG,GAAG,KAAKC,UAAL,CAAgBC,YAAhB,CAA6Bf,OAA7B,EAAsCgB,MAAhD;AACAC,UAAAA,OAAO,CAACC,GAAR,CAAY,OAAOL,GAAnB;AACAI,UAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BL,GAA5B;;AACAP,UAAAA,UAAU,CAACa,eAAX,CAA2BC,YAA3B,CAAwC,OAAxC,EAAiD;AAAEC,YAAAA,MAAM,EAAER;AAAV,WAAjD;AACH;;AAEMJ,QAAAA,cAAc,CAACa,IAAD,EAAY;AAC7BL,UAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BI,IAA9B;;AAEA,cAAIA,IAAI,CAACC,OAAL,IAAgBD,IAAI,CAACE,IAAzB,EAA+B;AAC3BlB,YAAAA,UAAU,CAACmB,SAAX,CAAqBJ,MAArB,GAA8BC,IAAI,CAACE,IAAL,CAAUH,MAAxC;AACAf,YAAAA,UAAU,CAACmB,SAAX,CAAqBC,QAArB,GAAgCJ,IAAI,CAACE,IAAL,CAAUE,QAA1C;AACApB,YAAAA,UAAU,CAACmB,SAAX,CAAqBE,WAArB,GAAmCL,IAAI,CAACE,IAAL,CAAUG,WAA7C;AACArB,YAAAA,UAAU,CAACmB,SAAX,CAAqBG,aAArB,GAAqCN,IAAI,CAACE,IAAL,CAAUI,aAA/C;AAEA7B,YAAAA,QAAQ,CAAC8B,SAAT,CAAmB,WAAnB;AACH,WAPD,MAOO;AACHZ,YAAAA,OAAO,CAACa,KAAR,CAAc,kBAAd,EAAkCR,IAAI,CAACS,OAAL,IAAgB,eAAlD,EADG,CAEH;AACH;AACJ;;AAtCyC,O","sourcesContent":["import { _decorator, Component, director, EditBox, Node } from 'cc';\r\nimport { userInfo } from './userInfo';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('loginScearnMgr')\r\nexport class loginScearnMgr extends Component {\r\n\r\n    @property(Node)\r\n    public my_EditBox: Node\r\n\r\n    start() {\r\n\r\n        globalThis.eventTarget.on(\"login_success\", this.onLoginSuccess, this);\r\n\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n\r\n    }\r\n\r\n\r\n    public onClickLogin() {\r\n\r\n        let str = this.my_EditBox.getComponent(EditBox).string\r\n        console.log(typeof str)\r\n        console.log(\"onClickLogin\", str);\r\n        globalThis._loginScearnMgr._sendMessage(\"login\", { userId: str });\r\n    }\r\n\r\n    public onLoginSuccess(data: any) {\r\n        console.log(\"onLoginSuccess\", data);\r\n\r\n        if (data.success && data.user) {\r\n            globalThis._userInfo.userId = data.user.userId;\r\n            globalThis._userInfo.userName = data.user.userName;\r\n            globalThis._userInfo.userHeadUrl = data.user.userHeadUrl;\r\n            globalThis._userInfo.userRoomCards = data.user.userRoomCards;\r\n\r\n            director.loadScene(\"HallScene\");\r\n        } else {\r\n            console.error(\"Login999 failed:\", data.message || \"Unknown error\");\r\n            // You might want to show an error message to the user here\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n}\r\n\r\n\r\n"]}