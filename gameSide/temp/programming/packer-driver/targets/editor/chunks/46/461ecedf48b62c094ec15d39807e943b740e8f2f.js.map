{"version":3,"sources":["file:///C:/Users/User/Documents/CocosGame/CoCos-Game-Login/login/assets/scripts/controllers/CoinController.ts"],"names":["_decorator","Component","Collider2D","Contact2DType","ScoreManager","ccclass","property","CoinController","start","console","log","collider","getComponent","on","BEGIN_CONTACT","onBeginContact","warn","selfCollider","otherCollider","group","collectCoin","scoreManager","instance","addScore","scoreValue","node","destroy"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,U,OAAAA,U;AAAYC,MAAAA,a,OAAAA,a;;AACzCC,MAAAA,Y,iBAAAA,Y;;;;;sFAFT;;;;;OAGM;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;gCAGjBO,c,WADZF,OAAO,CAAC,gBAAD,C,2BAAR,MACaE,cADb,SACoCN,SADpC,CAC8C;AAAA;AAAA;;AAAA;AAAA;;AAElB;AAExBO,QAAAA,KAAK,GAAG;AACNC,UAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ;AACE,gBAAMC,QAAQ,GAAG,KAAKC,YAAL,CAAkBV,UAAlB,CAAjB;;AACA,cAAIS,QAAJ,EAAc;AACVA,YAAAA,QAAQ,CAACE,EAAT,CAAYV,aAAa,CAACW,aAA1B,EAAyC,KAAKC,cAA9C,EAA8D,IAA9D;AACH,WAFD,MAEO;AACHN,YAAAA,OAAO,CAACO,IAAR,CAAa,6CAAb;AACH;AACJ;;AAEDD,QAAAA,cAAc,CAACE,YAAD,EAA2BC,aAA3B,EAAsD;AAChET,UAAAA,OAAO,CAACC,GAAR,CAAa,oBAAmBQ,aAAa,CAACC,KAAM,EAApD,EADgE,CAEhE;;AACA,cAAID,aAAa,CAACC,KAAd,KAAwB,CAA5B,EAA+B;AAAE;AAC7B,iBAAKC,WAAL;AACH;AACJ;;AAEOA,QAAAA,WAAW,GAAG;AAClBX,UAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EADkB,CAGlB;;AACA,gBAAMW,YAAY,GAAG;AAAA;AAAA,4CAAaC,QAAlC;;AACA,cAAID,YAAJ,EAAkB;AACdA,YAAAA,YAAY,CAACE,QAAb,CAAsB,KAAKC,UAA3B;AACH,WAPiB,CASlB;AAEA;;;AACA,eAAKC,IAAL,CAAUC,OAAV;AACH;;AAnCyC,O,6EACzCpB,Q;;;;;iBACoB,C","sourcesContent":["// File: assets/scripts/controllers/CoinController.ts\r\nimport { _decorator, Component, Node, Collider2D, Contact2DType } from \"cc\";\r\nimport { ScoreManager } from \"../managers/ScoreManager\";\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass(\"CoinController\")\r\nexport class CoinController extends Component {\r\n    @property\r\n    scoreValue: number = 1; // How many points this coin gives\r\n\r\n    start() {\r\n      console.log(\"CoinController: start\");\r\n        const collider = this.getComponent(Collider2D);\r\n        if (collider) {\r\n            collider.on(Contact2DType.BEGIN_CONTACT, this.onBeginContact, this);\r\n        } else {\r\n            console.warn(\"CoinController: no Collider2D found on coin\");\r\n        }\r\n    }\r\n\r\n    onBeginContact(selfCollider: Collider2D, otherCollider: Collider2D) {\r\n        console.log(`Coin contact123: ${otherCollider.group}`);\r\n        // Check if player touched the coin (assuming player is in group 2 or has specific tag)\r\n        if (otherCollider.group === 4) { // Assuming OBJECT group is 2\r\n            this.collectCoin();\r\n        }\r\n    }\r\n\r\n    private collectCoin() {\r\n        console.log(\"Coin collected!\");\r\n        \r\n        // Add score\r\n        const scoreManager = ScoreManager.instance;\r\n        if (scoreManager) {\r\n            scoreManager.addScore(this.scoreValue);\r\n        }\r\n\r\n        // Optional: Play collection sound/effect here\r\n        \r\n        // Destroy the coin\r\n        this.node.destroy();\r\n    }\r\n}"]}